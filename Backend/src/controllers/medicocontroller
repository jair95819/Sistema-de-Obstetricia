import { Medico } from "../models/index.js";

export const listar = async (req, res) => {
  const medicos = await Medico.findAll();
  res.json(medicos);
};

export const obtener = async (req, res) => {
  const medico = await Medico.findByPk(req.params.id);
  if (!medico) return res.status(404).json({ mensaje: "Médico no encontrado" });
  res.json(medico);
};

export const crear = async (req, res) => {
  const medico = await Medico.create(req.body);
  res.status(201).json(medico);
};

export const actualizar = async (req, res) => {
  const { id } = req.params;
  const [filas] = await Medico.update(req.body, { where: { id } });
  if (!filas) return res.status(404).json({ mensaje: "Médico no encontrado" });
  const actualizado = await Medico.findByPk(id);
  res.json(actualizado);
};

export const eliminar = async (req, res) => {
  const filas = await Medico.destroy({ where: { id: req.params.id } });
  if (!filas) return res.status(404).json({ mensaje: "Médico no encontrado" });
  res.json({ mensaje: "Médico eliminado" });
};
